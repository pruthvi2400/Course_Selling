{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../core/services/course.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction CreateEditCourseComponent_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 14);\n    i0.ɵɵtext(1, \" Title is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateEditCourseComponent_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 14);\n    i0.ɵɵtext(1, \" Description is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateEditCourseComponent_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 14);\n    i0.ɵɵtext(1, \" Price must be zero or more. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateEditCourseComponent_p_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.successMessage);\n  }\n}\nfunction CreateEditCourseComponent_p_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nexport let CreateEditCourseComponent = /*#__PURE__*/(() => {\n  class CreateEditCourseComponent {\n    fb;\n    courseService;\n    route;\n    router;\n    loading = false;\n    errorMessage = '';\n    successMessage = '';\n    courseId = null;\n    form;\n    constructor(fb, courseService, route, router) {\n      this.fb = fb;\n      this.courseService = courseService;\n      this.route = route;\n      this.router = router;\n      this.form = this.fb.group({\n        title: ['', [Validators.required]],\n        description: ['', [Validators.required]],\n        price: [0, [Validators.required, Validators.min(0)]]\n      });\n    }\n    ngOnInit() {\n      this.courseId = this.route.snapshot.paramMap.get('id');\n      if (this.courseId) {\n        this.loading = true;\n        this.courseService.getCourse(this.courseId).subscribe({\n          next: course => {\n            this.form.patchValue(course);\n            this.loading = false;\n          },\n          error: () => {\n            this.loading = false;\n            this.errorMessage = 'Unable to load course details.';\n          }\n        });\n      }\n    }\n    submit() {\n      if (this.form.invalid) {\n        this.form.markAllAsTouched();\n        return;\n      }\n      this.loading = true;\n      this.errorMessage = '';\n      this.successMessage = '';\n      const action = this.courseId ? this.courseService.updateCourse(this.courseId, this.form.getRawValue()) : this.courseService.createCourse(this.form.getRawValue());\n      action.subscribe({\n        next: () => {\n          this.loading = false;\n          this.successMessage = this.courseId ? 'Course updated.' : 'Course created.';\n          if (!this.courseId) {\n            this.router.navigate(['/admin']);\n          }\n        },\n        error: error => {\n          this.loading = false;\n          this.errorMessage = error?.error?.message ?? 'Unable to save course.';\n        }\n      });\n    }\n    static ɵfac = function CreateEditCourseComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CreateEditCourseComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CourseService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CreateEditCourseComponent,\n      selectors: [[\"app-create-edit-course\"]],\n      standalone: false,\n      decls: 26,\n      vars: 10,\n      consts: [[1, \"container\"], [1, \"card\", \"form-card\"], [1, \"muted\"], [1, \"form-grid\", 3, \"ngSubmit\", \"formGroup\"], [1, \"input-group\"], [\"for\", \"title\"], [\"id\", \"title\", \"type\", \"text\", \"formControlName\", \"title\", \"placeholder\", \"Course title\"], [\"class\", \"error\", 4, \"ngIf\"], [\"for\", \"description\"], [\"id\", \"description\", \"rows\", \"4\", \"formControlName\", \"description\"], [\"for\", \"price\"], [\"id\", \"price\", \"type\", \"number\", \"formControlName\", \"price\", \"min\", \"0\"], [\"class\", \"success\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", 3, \"disabled\"], [1, \"error\"], [1, \"success\"]],\n      template: function CreateEditCourseComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"h1\");\n          i0.ɵɵtext(3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"p\", 2);\n          i0.ɵɵtext(5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function CreateEditCourseComponent_Template_form_ngSubmit_6_listener() {\n            return ctx.submit();\n          });\n          i0.ɵɵelementStart(7, \"div\", 4)(8, \"label\", 5);\n          i0.ɵɵtext(9, \"Title\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(10, \"input\", 6);\n          i0.ɵɵtemplate(11, CreateEditCourseComponent_span_11_Template, 2, 0, \"span\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 4)(13, \"label\", 8);\n          i0.ɵɵtext(14, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"textarea\", 9);\n          i0.ɵɵtemplate(16, CreateEditCourseComponent_span_16_Template, 2, 0, \"span\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"div\", 4)(18, \"label\", 10);\n          i0.ɵɵtext(19, \"Price\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(20, \"input\", 11);\n          i0.ɵɵtemplate(21, CreateEditCourseComponent_span_21_Template, 2, 0, \"span\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(22, CreateEditCourseComponent_p_22_Template, 2, 1, \"p\", 12)(23, CreateEditCourseComponent_p_23_Template, 2, 1, \"p\", 7);\n          i0.ɵɵelementStart(24, \"button\", 13);\n          i0.ɵɵtext(25);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          let tmp_3_0;\n          let tmp_4_0;\n          let tmp_5_0;\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(ctx.courseId ? \"Edit course\" : \"Create course\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.courseId ? \"Update course details.\" : \"Add a new course to the catalog.\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.form);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.form.get(\"title\")) == null ? null : tmp_3_0.touched) && ((tmp_3_0 = ctx.form.get(\"title\")) == null ? null : tmp_3_0.invalid));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.form.get(\"description\")) == null ? null : tmp_4_0.touched) && ((tmp_4_0 = ctx.form.get(\"description\")) == null ? null : tmp_4_0.invalid));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.form.get(\"price\")) == null ? null : tmp_5_0.touched) && ((tmp_5_0 = ctx.form.get(\"price\")) == null ? null : tmp_5_0.invalid));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.successMessage);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance();\n          i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Saving...\" : ctx.courseId ? \"Update course\" : \"Create course\", \" \");\n        }\n      },\n      dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\".form-card[_ngcontent-%COMP%], .form-grid[_ngcontent-%COMP%]{display:grid;gap:1rem}.muted[_ngcontent-%COMP%]{color:var(--muted)}.success[_ngcontent-%COMP%]{color:#027a48}\"]\n    });\n  }\n  return CreateEditCourseComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}